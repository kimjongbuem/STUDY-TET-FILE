7강 ip 프로토콜
1 기능>>>>>>>>>.....
네트워크 계층) ip주소는 논리주소 맥주소는 물리주소임( 직접연결이냐 아니냐?)
기능 1. 라우팅 - 목적지까지 도달하기 위한 경로선택과정(패킷 전달 경로 선택) 2. 혼잡제어 : 패킷수가 과도하게 증가하는 현상 -> 이현상은 확산될수있으니 조치가 필요함. 3. 패킷의 분할과 병합
비연결형 서비스는 신뢰성 그닥, 오류랑 흐름제어 많이, 도착순서 일정안함 <=> 연결형서비스는 반대.

라우팅)
가상회선은 연결형서비스이며 경로선택 1번만 <=> 데이터그램은 고정경로없음 독립적 전달경로 선택
-정적라우팅 <간단>
경로정보를 라우터에 미리저장하여 변화가 생기면 적절한 대처 못함, 네트워크 혼잡도 반영못해요

-동적라우팅 <복잡>
네트웤 상황에 따라 적절하게 동작하는 방식 -> 최신경로정보 신속, 공유, 갱신
=> HELLO / ECHO 패킷
헬로우 패킷 :  연결된 라우터 초기화를 위한 이웃라우터의 경로정보를 파악한다. // 에코패킷 : 전송 지연 시간 측정 => 즉각 회신하도록...

-라우팅테이블
라우터들이 적절한 경로를 쉽게 찾도록 하기 위한 가장 기본적인 정보테이블 : 필수정보는 목적지호스트(최종주소), 다음홉주소(최종주소를 갈려면 거쳐가야하는 최소경로 노드)

-처리
네트워크의 현재 상황을 정확히 반영해야한다.
--> 소스라우팅 : 전달경로를 스스로 선택하고 결정하는 방식이며 데이터그램,가상회선 방식 모두사용.
--> 분산라우팅 : 라우팅 정보가 분산되는 방식이며 각 라우터가 효율적인 경로 선택에 참여, 데이터그램 => 호스트많아지면 효과좋음, 네트워크 상황에 따라 적절히 변경(동적 특징)
--> 중앙라우팅 : RCC(라우팅 컨트롤 센서)가 라우팅 경로를 모두 가지고있어 송신호스트는 RCC로부터 경로정보를 가져와야함(네트워크 규모커지면 트래피 오짐)
--> 계층라우팅 : 분산+중앙 장점 =>계층구조형태 관리 라우팅

혼잡제어)
-흐름제어 : 점대점 // 혼잡제어는 네트워크 구조 => 지나치게 많은 패킷이 오면 발생 => 버퍼용량 증가시키면 전송지연시간 올라감 => 타임아웃시간이 패킷전송시간지연보다 짧다면 
패킷재전송을 계속하니 트래픽증가 악순환 그러니.. 패킷생존시간을 적절하게 설정해야함

-트래픽성형
사용자한테 의존적 -> 특정시간 버스트 현상 기인-망단위(종로 크리스마스)
송신호스트가 전송하는 패킷의 발생빈도가 네트워크에서 예측 할 수있는 전송률로 이루어지게 하는 기능임. ->사전에 협상과 조율 / 예측
해당 알고리즘 : 리키버킷 ( 고정크기 ) 

-혼잡제거
서브넷에서 혼잡 감지하면 사라질 때 까지 연결설정 허락 안함 
아님 사전예방하던가...
아니면,, ECN 패킷(컨트롤패킷)을 이용하여 패킷 보내지말라고 연결된 호스트들에게 전달. (해당 지점 특별관리대상) -> OK 패킷양 줄이거나 없앨게..


2 라우팅 프로토콜>>>>>>>>>>>>>.................

1. 간단하게~ 홉의 개수로 파악하잠
최단경로 라우팅 / 플러딩(전체 네트웤 제어, 트래픽 엉청남 ㅠ)

2. 거리벡터 라우팅 프로토콜
라우터가 자신과 직접 연결된 이웃 라우터와 라우팅 정보를 교환하는 방식임.
링크벡터/ 거리벡터 / 다음 홉벡터

링크벡터 - L(R) = [ 포트1 포트2(해당 NET으로 연결된 포트 ) ...
- 링크 상태 라우팅 프로토콜 <- 변화했을 때만 갱신, 모든라우터들에게 통보
플러딩기법 , OSPF (TCP/IP) 사용

거리벡터 - D(R) = [ 해당 라우터가 거치는 라우터의 개수(자기 자신 포함)]
- RIP 프로토콜(내부 라우팅 프로토콜) <- 주기적으로변하뮤
소규모 넼웤 , 이웃한 라우터가 제공하는 거리 벡터 정보가 임의의 짧은 시간내에 모두 도착해야함 
- 입력되는 거리 벡터 정보가 새로운 넼웤 목적지 주소이면 라우팅 테이블적용, 정보수정, 지연시간 비교해서 적으면 새로운 경로 설정
패킷구조 == Metric for Address : 거리정보 IP Adresss : 라우터 정보

다음 홉벡터 - H(R) = [ 해당 라우터가 특정 NET으로 가야할 때 거쳐야하는 라우터 이름]

외부라우팅 프로토콜(BGP) -TCP 프로토콜 
인터넷에 많이 사용ㅡ 라우터가 라우팅 정보를 교환하도록... 다른 환경에서 동작하는 라우터를 일반적으로 게이트웨이라함.
- Open(연결) - Update(갱신) - KeepAlive(연관성파악) - Notification (오류상태 통보)


3 ip 프로토콜 >>>>>>>>>>>>>>..............
주요특징 
1. 비연결형서비스 2. 패킷 분할/병합 3. 헤더 체크섬만... 4. Best Effort 원칙에 따름(백프로 도착보장안함 ㅎ)

ip헤더구조)
ver headerlength ds ecn packetlength
identification , flagbit(mf, df)
time to live transport headchecksum fragmentOffset
s /d / padding,option 각 32바이트
DS/ECN : 다양한 서비스 개념을 제공하기위해서 정의(서비스 등급 차이 구성)
패킷분할 - 
Identification 식별자 - 다시 병합할 때 쓰임./DF : 패킷분할 못하게.. 1로 지정하면 분할막음 ... 
MF : 분할된 패킷을 전송시 여러개의 분할 패킷이 전송되니 .. 뒤에 패킷있다고 표시해야함 ( 1 ) 없으면 (0) <- 처음은무조건 1
Fragment Offset 분할옵셋 : 분할된 패킷의 내용이 원래의 분할 전 데이터에서 위치하는 상대주소 (처음은  0 -> 해당 mtu최대 크기에따라 달라짐ㅎ ) 
주소관련-
ABCDE클래스 -네트워크 점점 커짐 -> HOST 감소 (A~C)
0 -> 10 -> 110 -> 1110 -> 1111 각각의 주소 체계 우리는 
패킷분할)
식별자(header)/ 패킷길이(mtu) / MF(0 or 1) / FragmentOffset (우앙 패킷 넣은 주소)

		네트워크		  /	host
A클래스 0 0 ~ 127.255.255.255/ 0.0.0 ~ 255.255.255
B클래스 10 128.0.0.0 ~ 191.255.255.255/ 0.0~255.255  
C클래스  110 192 ~ 223.255.255.255 / 0 ~255
D클래스 1110 224 ~ 239.255.255.255  멀티캐스트 주소
E클래스  1111 240 ~ 255.255.255.255  예약주소


DHCP 프로토콜) 각 IP주소는 유니크함.
DHCP_DISCOVER : 브로드캐스트 메시지 ( 해당 망좀 찾아봐..) 클 -> 서
DHCP_OFFER : 서버가 가용할 리스트를 제공함 이거 추천해 - 서버가. 바로 보냄 
DHCP_REQUEST : 이거 써도 되냐? ( 먼저 선점한 클라가 있을수 있다.)
DHCP ACK /NACK :  그럼ㅇㅇ / 안돼 ㅋ

캡슐화는 IP헤더에 소스, 도착 주소 감쌈.
